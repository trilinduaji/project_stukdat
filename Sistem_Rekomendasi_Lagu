import tkinter as tk
from tkinter import ttk
from tkinter import messagebox


class ScoreNode:
    def __init__(self, score):
        self.score = score
        self.next = None

class ScoreLinkedList:
    def __init__(self):
        self.head = None

    def add_score(self, score_value):
        new_node = ScoreNode(score_value)
        if not self.head:
            self.head = new_node
            return

        current = self.head
        while current.next:
            current = current.next
        current.next = new_node

    def calculate_average(self):
        total = 0
        count = 0
        current = self.head
        while current:
            total += current.score
            count += 1
            current = current.next
        return total / count if count > 0 else 0

class SongGraph:
    def __init__(self):
        self.genre_map = {}

    def add_song_to_genre(self, song_id, genre_list):
        for genre in genre_list:
            if genre not in self.genre_map:
                self.genre_map[genre] = []
            if song_id not in self.genre_map[genre]:
                self.genre_map[genre].append(song_id)

    def get_songs_by_genre(self, genre):
        return self.genre_map.get(genre, [])

    def remove_song_from_genres(self, song_id, genre_list):
        for genre in genre_list:
            if genre in self.genre_map and song_id in self.genre_map[genre]:
                self.genre_map[genre].remove(song_id)

class Song:
    def __init__(self, id, title, artist, genres):
        self.id = id
        self.title = title
        self.artist = artist
        self.genres = genres
        self.scores = ScoreLinkedList()



# ajii
Class MusicApp:
    def _init_(self, master, system):
        self.master = master
        self.system = system
        self.selected_song_id = None

        master.title ("Sistem Rekomendasi Lagu")
        master.geometry("900x650")

        sel.notebook = ttk.Notebook(master)
        self.notebook.pack(pady =10, padx =10, fill ="both", expand = True)
        self.notebook.bind("<<NotebookTabChanged>>", self._on_tab_change)

        self.frame_data = ttk.Frame(self.notebook)
        self.notebook.add(self.frame_data, text=" Kelola Lagu ")
        self._setup_data_frame(self.frame_data)

        self.frame_rec = ttk.Frame(self.notebook)
        self.notebook.add(self.frame_rec, text=" Dapatkan Rekomendasi ")
        self._setup_recommendation_frame(self.frame_rec)

        self._initial_data()
        self.refresh_list()
        self._update_genre_combobox()
